<!DOCTYPE html>
<html ng-app="myModification">

<head>
    <title>Modify content</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="/js/jquery.js"></script>
    <script src="/js/angular.js"></script>
    <script src="/js/angular-sanitize.js"></script>
    <script src="/angular/controller/myModifyController.js"></script>
    <link rel="stylesheet" href="/css/bootstrap.css">
    <script src="/js/bootstrap.js"></script>
    <script src="/js/angular-ui-notification.js"></script>
    <script src="/js/select.js"></script>
    <link href="/css/select.css" rel="stylesheet" type="text/css">
    <script src="preferences.js"></script>
    <link href="/private.css" rel="stylesheet" type="text/css">
    <style>
        body {
            padding: 15px;
        }
    </style>
</head>

<body>
    <div id="titolo" align="center" style="font-family:Arial; font-size:50px">
        <p> NEPTIS </p>
    </div>
    <nav class="navbar navbar-default navbar-static-top" style="top:-23px;height: 51px">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">NEPTIS</a>
            <ul class="nav navbar-nav">
                <li> <a class="nav-link" href='curatore'>Home</a></li>
                <li> <a class="nav-link" href='creation'> Create</a></li>
                <li class="active"> <a class="nav-link" href='modification'> Modify</a></li>
            </ul>
        </div>
    </nav>
    <div class="container">
        <form id="modify" name="modify">
            <div ng-controller="myModifyController" class="container">
                <div id='selectStructure' style='width:50%;margin-top: 60px'>
                    <label for='structure'>Type of structure to modify</label>
                    <ui-select ng-model="structure.selected" ng-change="change()" theme="bootstrap" ng-disabled="disabled" reset-search-input="false" style="width: 300px;">
                        <ui-select-match placeholder="Select a structure...">{{$select.selected.name}}</ui-select-match>
                        <ui-select-choices repeat="struct in structure | filter: $select.search" refresh-delay="0">
                            <div ng-bind-html="struct.name | highlight: $select.search"></div>
                        </ui-select-choices>
                    </ui-select>
                    <tt> Strutture scelta {{structure.selected}} </tt>
                </div>

                <div id='selectCity' style='width:50%;margin-top: 60px' ng-show="structure.selected.name == 'City'" class="input-group">
                    <label for='existingCity'>Select a city</label>
                    <!--  <select name="existingMuseum" id='existingMuseum' ng-model="museum" ng-change="changeMuseum(museum.museumId)" ng-options="m.museumName group by m.region for m in museumJSON">
            </select> !-->
                    <ui-select ng-model="citySel.selected" ng-change="showAttraction(citySel.selected.cityId)" theme="bootstrap" ng-disabled="disabled" reset-search-input="false" style="width: 300px;">
                        <ui-select-match placeholder="Select a city...">{{$select.selected.cityName}}</ui-select-match>
                        <ui-select-choices group-by="'region' " repeat="city in cityJSON | filter: $select.search" refresh-delay="0">
                            <div ng-bind-html="city.cityName | highlight: $select.search"></div>
                        </ui-select-choices>
                    </ui-select>
                </div>


                <div id='selectMuseum' style='width:50%;margin-top: 60px' ng-show="(structure.selected.name == 'Museum' || structure.selected.name == 'Opened Museum')" class="input-group">
                    <label for='existingMuseum'>Select a museum</label>
                    <ui-select ng-model="museumSel.selected" ng-change="changeMuseum(museumSel.selected.museumId)" theme="bootstrap" ng-disabled="disabled" reset-search-input="false" style="width: 300px;">
                        <ui-select-match placeholder="Select a museum...">{{$select.selected.museumName}} </ui-select-match>
                        <ui-select-choices group-by="'region'" repeat="museum in museumJSON | filter: $select.search" refresh-delay="0">
                            <div ng-bind-html="museum.museumName | highlight: $select.search"></div>
                        </ui-select-choices>
                    </ui-select>

                    <input type='button' value='Modify museum name' class="btn btn-warning" style="margin-left:5px" data-toggle="modal" data-target="#modifyMuseum" ng-disabled="!museumSel.selected">
                </div>


                <div id='selectArea' style='width:50%;margin-top: 60px' ng-show="(structure.selected.name === 'Museum' || structure.selected.name === 'Opened Museum')" class="input-group">
                    <label for='existingArea'>Select an area</label>
                    <ui-select ng-model="areaMSel.selected" ng-change="changeArea(areaMSel.selected.areaId)" theme="bootstrap" ng-disabled="disabled" reset-search-input="false" style="width: 300px;">
                        <ui-select-match placeholder="Select an area...">{{$select.selected.areaName}} <button type="button" style="position:absolute;margin-left: 20px" class="close" ng-click="clearArea($event)">&times;</button></ui-select-match>
                        <ui-select-choices repeat="areaMSel in areaMJSON | filter: $select.search" refresh-delay="0">
                            <div ng-bind-html="areaMSel.areaName | highlight: $select.search"></div>
                        </ui-select-choices>
                    </ui-select>
                    <input type='button' value='Modify area name' class="btn btn-warning" style="margin-left: 5px" data-toggle="modal" data-target="#modifyArea" ng-disabled="!areaMSel.selected">
                    <input type='button' value='Add new area' class="btn btn-success" style="margin-left: 5px" data-toggle="modal" data-target="#newArea" ng-disabled="checkDisabledNewAreaButton()">
                </div>

                <div id='selectAttraction' style='width:50%;margin-top: 60px' ng-show="(structure.selected.name === 'Museum' || structure.selected.name === 'City' || structure.selected.name === 'Opened Museum')" class="input-group">
                    <label for='existingAttr'>Select an attraction</label>
                    <!--    <select name="existingAttr" id='existingAttr' ng-model="attraction" ng-options="a.attractionName for a in attractionJSON">

            </select> !-->
                    <ui-select ng-model="attractionSel.selected" theme="bootstrap" ng-disabled="disabled" reset-search-input="false" style="width: 300px;">
                        <ui-select-match placeholder="Select an attraction...">{{$select.selected.attractionName}} <button type="button" style="position:absolute;margin-left:20px" class="close" ng-click="clearAttr($event)">&times;</button></ui-select-match>
                        <ui-select-choices repeat="attraction in attractionJSON | filter: $select.search" refresh-delay="0">
                            <div ng-bind-html="attraction.attractionName | highlight: $select.search"></div>
                        </ui-select-choices>
                    </ui-select>

                    <input type='button' value='disable' class="btn btn-danger" style="margin-left: 5px" ng-disabled="!attractionSel.selected" ng-click="disable(attractionSel.selected)">
                    <input type='button' value='modify' class="btn btn-warning" style="margin-left: 5px" data-toggle="modal" data-target="#modifyAttr" ng-disabled="!attractionSel.selected">
                    <input type='button' value='new' class="btn btn-success" style="margin-left: 5px" data-toggle="modal" data-target="#newAttr" ng-disabled="checkDisabledNewAttrButton()">

                </div>

                <!-- Modal for modifying attraction-->
                <div id="modifyAttr" class="modal fade" role="dialog">
                    <div class="modal-dialog">
                        <!-- Modal content-->
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                                <h4 class="modal-title">Type the new name for the attraction</h4>
                            </div>
                            <div class="modal-body">
                                <input id='attrModified' class='form-control' name='attrModified' ng-model="attrModified" type="text" placeholder="Insert new attraction name">
                            </div>
                            <div class="modal-footer">
                                <input type='button' value='confirm' class="btn btn-success" ng-click="modifyAttraction(structure.selected.name)">
                                <!-- <button type="button" class="btn btn-default" data-dismiss="modal">Close</button> !-->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Modal for adding new attraction-->
                <div id="newAttr" class="modal fade" role="dialog">
                    <div class="modal-dialog">
                        <!-- Modal content-->
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                                <h4 class="modal-title">Type the name of the new attraction</h4>
                            </div>
                            <div class="modal-body">
                                <input id='newAttr' class='form-control' name='newAttr' ng-model="newAttr" type="text" placeholder="Insert new attraction name">
                            </div>
                            <div class="modal-footer">
                                <input type='button' value='confirm' class="btn btn-success" ng-click="addNewAttraction(structure.selected.name)">
                                <!-- <button type="button" class="btn btn-default" data-dismiss="modal">Close</button> !-->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Modal for modifying area-->
                <div id="modifyArea" class="modal fade" role="dialog">
                    <div class="modal-dialog">
                        <!-- Modal content-->
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                                <h4 class="modal-title">Type the new name for the area</h4>
                            </div>
                            <div class="modal-body">
                                <input id='areaModified' class='form-control' name='areaModified' ng-model="areaModified" type="text" placeholder="Insert new area name">
                            </div>
                            <div class="modal-footer">
                                <input type='button' value='confirm' class="btn btn-success" ng-click="modifyArea(structure)">
                                <!-- <button type="button" class="btn btn-default" data-dismiss="modal">Close</button> !-->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Modal for adding new area-->
                <div id="newArea" class="modal fade" role="dialog">
                    <div class="modal-dialog">
                        <!-- Modal content-->
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                                <h4 class="modal-title">Type the name of the new area</h4>
                            </div>
                            <div class="modal-body">
                                <input id='newArea' class='form-control' name='newArea' ng-model="newArea" type="text" placeholder="Insert new area name">
                            </div>
                            <div class="modal-footer">
                                <input type='button' value='confirm' class="btn btn-success" ng-click="addNewArea(structure.selected.name)">
                                <!-- <button type="button" class="btn btn-default" data-dismiss="modal">Close</button> !-->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Modal for modifying a museum-->
                <div id="modifyMuseum" class="modal fade" role="dialog">
                    <div class="modal-dialog">
                        <!-- Modal content-->
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                                <h4 class="modal-title">Type the new name for the museum</h4>
                            </div>
                            <div class="modal-body">
                                <input id='museumModified' class='form-control' name='museumModified' ng-model="museumModified" type="text" placeholder="Insert new museum name">
                            </div>
                            <div class="modal-footer">
                                <input type='button' value='confirm' class="btn btn-success" ng-click="modifyMuseum(structure.selected.name)">
                                <!-- <button type="button" class="btn btn-default" data-dismiss="modal">Close</button> !-->
                            </div>
                        </div>
                    </div>
                </div>

                <div id='finish' style='margin-top: 30px'>
                    <input type='button' class="btn btn-primary" id='submit' value='Finish' ng-click="parser(structure.selected.name)" style='margin-left: 300px'>
                </div>

            </div>
        </form>
    </div>
</body>

</html>